/*
 * Click nbfs://nbhost/SystemFileSystem/Templates/Licenses/license-default.txt to change this license
 * Click nbfs://nbhost/SystemFileSystem/Templates/GUIForms/JPanel.java to edit this template
 */
package libproject.librarypro;
import java.util.ArrayList;
import java.util.HashMap;
import java.util.Map;
import java.io.*;
import java.util.*;
import java.io.BufferedWriter;
import java.io.FileWriter;
import java.io.IOException;
import java.io.PrintWriter;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.swing.JFrame;
import javax.swing.JOptionPane;

/**
 *
 * @author niamh
 */
//This program brings values from a txt file that can be edited to add to and/or can show that data. 
//There are two differnt sets of data , a person and a book, these are then used to identify what person is associated with what ID number. 
//The ID numbers are used to lend books out to people, the program has the abilty to only have one book lent out at a time
public class LibraryProGui extends javax.swing.JPanel {
    private static HashMap<Integer, Integer> bookMap = new HashMap<Integer, Integer>();
    private static HashMap<Integer, ArrayList<Integer>> personMap = new HashMap<Integer, ArrayList<Integer>>();
    private static ArrayList<Person> fileDataPerson = new ArrayList<Person>();
    private static ArrayList<Book> fileDataBook = new ArrayList<Book>();
    
    /**
     * Creates new form LibraryProGui
     */
    public LibraryProGui() {
        initComponents();
        
        String fileNamePerson = "person.txt";
        readFilePerson(fileNamePerson, fileDataPerson);
        
        String fileNameBook = "book.txt"; 
        readFileBook(fileNameBook, fileDataBook);
        
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        jTabbedPane2 = new javax.swing.JTabbedPane();
        ShowPnAndBk = new javax.swing.JPanel();
        jLabel8 = new javax.swing.JLabel();
        jLabel9 = new javax.swing.JLabel();
        ShowPersonButton = new javax.swing.JButton();
        ShowBookButton = new javax.swing.JButton();
        AddBook = new javax.swing.JPanel();
        BookNeTxt = new javax.swing.JTextField();
        jLabel1 = new javax.swing.JLabel();
        jLabel2 = new javax.swing.JLabel();
        jLabel3 = new javax.swing.JLabel();
        AuthorNeTxt = new javax.swing.JTextField();
        BookISBNTxt = new javax.swing.JTextField();
        AddBookBtn = new javax.swing.JButton();
        AddPerson = new javax.swing.JPanel();
        jLabel5 = new javax.swing.JLabel();
        jLabel6 = new javax.swing.JLabel();
        PersonLtNeTxt = new javax.swing.JTextField();
        PersonFtNeTxt = new javax.swing.JTextField();
        AddPersonBtn = new javax.swing.JButton();
        Lending = new javax.swing.JPanel();
        jLabel11 = new javax.swing.JLabel();
        jLabel12 = new javax.swing.JLabel();
        LendPersonIDNumTxt = new javax.swing.JTextField();
        LendBookIDNumTxt = new javax.swing.JTextField();
        LendBtn = new javax.swing.JButton();
        ReturnBtn = new javax.swing.JButton();
        jScrollPane1 = new javax.swing.JScrollPane();
        textArea = new javax.swing.JTextArea();

        setCursor(new java.awt.Cursor(java.awt.Cursor.DEFAULT_CURSOR));
        setPreferredSize(new java.awt.Dimension(450, 450));

        jLabel8.setText("Show Borrowers Information");

        jLabel9.setText("Show Book Information");

        ShowPersonButton.setText("Press");
        ShowPersonButton.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                ShowPersonButtonActionPerformed(evt);
            }
        });

        ShowBookButton.setText("Press");
        ShowBookButton.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                ShowBookButtonActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout ShowPnAndBkLayout = new javax.swing.GroupLayout(ShowPnAndBk);
        ShowPnAndBk.setLayout(ShowPnAndBkLayout);
        ShowPnAndBkLayout.setHorizontalGroup(
            ShowPnAndBkLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(ShowPnAndBkLayout.createSequentialGroup()
                .addGap(24, 24, 24)
                .addGroup(ShowPnAndBkLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(jLabel9)
                    .addComponent(jLabel8))
                .addGap(52, 52, 52)
                .addGroup(ShowPnAndBkLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(ShowBookButton)
                    .addComponent(ShowPersonButton))
                .addContainerGap(122, Short.MAX_VALUE))
        );
        ShowPnAndBkLayout.setVerticalGroup(
            ShowPnAndBkLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(ShowPnAndBkLayout.createSequentialGroup()
                .addGap(27, 27, 27)
                .addGroup(ShowPnAndBkLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(ShowPersonButton)
                    .addComponent(jLabel8))
                .addGap(22, 22, 22)
                .addGroup(ShowPnAndBkLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel9)
                    .addComponent(ShowBookButton))
                .addContainerGap(107, Short.MAX_VALUE))
        );

        jTabbedPane2.addTab("Show Borrowers and Book", ShowPnAndBk);

        BookNeTxt.setText("Enter Book Name");

        jLabel1.setText("What is the book name:");

        jLabel2.setText("What is the author's full name:");

        jLabel3.setText("What is the book's ISBN:");

        AuthorNeTxt.setText("Enter First Name Last Name");

        BookISBNTxt.setText("Enter ISBN");

        AddBookBtn.setText("Add Book");
        AddBookBtn.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                AddBookBtnActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout AddBookLayout = new javax.swing.GroupLayout(AddBook);
        AddBook.setLayout(AddBookLayout);
        AddBookLayout.setHorizontalGroup(
            AddBookLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(AddBookLayout.createSequentialGroup()
                .addContainerGap()
                .addGroup(AddBookLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                    .addComponent(AddBookBtn)
                    .addGroup(AddBookLayout.createSequentialGroup()
                        .addGroup(AddBookLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(jLabel3)
                            .addComponent(jLabel2)
                            .addComponent(jLabel1))
                        .addGap(28, 28, 28)
                        .addGroup(AddBookLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING, false)
                            .addComponent(AuthorNeTxt, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.DEFAULT_SIZE, 210, Short.MAX_VALUE)
                            .addComponent(BookNeTxt, javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(BookISBNTxt))))
                .addContainerGap(18, Short.MAX_VALUE))
        );
        AddBookLayout.setVerticalGroup(
            AddBookLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(AddBookLayout.createSequentialGroup()
                .addGap(17, 17, 17)
                .addGroup(AddBookLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel1)
                    .addComponent(BookNeTxt, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(18, 18, 18)
                .addGroup(AddBookLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(jLabel2)
                    .addComponent(AuthorNeTxt, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(19, 19, 19)
                .addGroup(AddBookLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(BookISBNTxt, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jLabel3))
                .addGap(27, 27, 27)
                .addComponent(AddBookBtn)
                .addGap(31, 31, 31))
        );

        jTabbedPane2.addTab("Add Book", AddBook);

        jLabel5.setText("What is the persons first name:");

        jLabel6.setText("What is the borrowers last name:");

        PersonLtNeTxt.setText("Enter Name");

        PersonFtNeTxt.setText("Enter Name");

        AddPersonBtn.setText("Add Person");
        AddPersonBtn.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                AddPersonBtnActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout AddPersonLayout = new javax.swing.GroupLayout(AddPerson);
        AddPerson.setLayout(AddPersonLayout);
        AddPersonLayout.setHorizontalGroup(
            AddPersonLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(AddPersonLayout.createSequentialGroup()
                .addContainerGap()
                .addGroup(AddPersonLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                    .addComponent(AddPersonBtn)
                    .addGroup(AddPersonLayout.createSequentialGroup()
                        .addGroup(AddPersonLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(jLabel5)
                            .addComponent(jLabel6))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                        .addGroup(AddPersonLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                            .addComponent(PersonFtNeTxt, javax.swing.GroupLayout.DEFAULT_SIZE, 210, Short.MAX_VALUE)
                            .addComponent(PersonLtNeTxt))))
                .addContainerGap(20, Short.MAX_VALUE))
        );
        AddPersonLayout.setVerticalGroup(
            AddPersonLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(AddPersonLayout.createSequentialGroup()
                .addGap(17, 17, 17)
                .addGroup(AddPersonLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel5)
                    .addComponent(PersonFtNeTxt, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(21, 21, 21)
                .addGroup(AddPersonLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel6)
                    .addComponent(PersonLtNeTxt, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(41, 41, 41)
                .addComponent(AddPersonBtn)
                .addContainerGap(55, Short.MAX_VALUE))
        );

        jTabbedPane2.addTab("Add Person", AddPerson);

        jLabel11.setText("What is the borrower's ID number:");

        jLabel12.setText("What is the book's ID number:");

        LendPersonIDNumTxt.setText("Enter ID");

        LendBookIDNumTxt.setText("Enter ID");

        LendBtn.setText("Lend");
        LendBtn.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                LendBtnActionPerformed(evt);
            }
        });

        ReturnBtn.setText("Return");
        ReturnBtn.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                ReturnBtnActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout LendingLayout = new javax.swing.GroupLayout(Lending);
        Lending.setLayout(LendingLayout);
        LendingLayout.setHorizontalGroup(
            LendingLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, LendingLayout.createSequentialGroup()
                .addGap(17, 17, 17)
                .addGroup(LendingLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(jLabel11)
                    .addComponent(jLabel12))
                .addGap(27, 27, 27)
                .addGroup(LendingLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(LendPersonIDNumTxt, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(LendBookIDNumTxt, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(19, 133, Short.MAX_VALUE))
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, LendingLayout.createSequentialGroup()
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addGroup(LendingLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(ReturnBtn)
                    .addComponent(LendBtn))
                .addGap(42, 42, 42))
        );
        LendingLayout.setVerticalGroup(
            LendingLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(LendingLayout.createSequentialGroup()
                .addGap(26, 26, 26)
                .addGroup(LendingLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel11)
                    .addComponent(LendPersonIDNumTxt, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGroup(LendingLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(LendingLayout.createSequentialGroup()
                        .addGap(30, 30, 30)
                        .addGroup(LendingLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(LendBookIDNumTxt, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(jLabel12))
                        .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                    .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, LendingLayout.createSequentialGroup()
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 54, Short.MAX_VALUE)
                        .addComponent(LendBtn)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                        .addComponent(ReturnBtn)
                        .addGap(42, 42, 42))))
        );

        jTabbedPane2.addTab("Lending", Lending);

        textArea.setColumns(20);
        textArea.setRows(5);
        textArea.setToolTipText("");
        textArea.setDisabledTextColor(new java.awt.Color(0, 0, 0));
        textArea.setEnabled(false);
        jScrollPane1.setViewportView(textArea);

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(this);
        this.setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(layout.createSequentialGroup()
                        .addGap(21, 21, 21)
                        .addComponent(jScrollPane1, javax.swing.GroupLayout.PREFERRED_SIZE, 398, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addGroup(layout.createSequentialGroup()
                        .addContainerGap()
                        .addComponent(jTabbedPane2, javax.swing.GroupLayout.PREFERRED_SIZE, 421, javax.swing.GroupLayout.PREFERRED_SIZE)))
                .addContainerGap(27, Short.MAX_VALUE))
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addGap(20, 20, 20)
                .addComponent(jTabbedPane2, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(18, 18, 18)
                .addComponent(jScrollPane1, javax.swing.GroupLayout.DEFAULT_SIZE, 173, Short.MAX_VALUE)
                .addContainerGap())
        );
    }// </editor-fold>//GEN-END:initComponents

    private void ShowPersonButtonActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_ShowPersonButtonActionPerformed
        // TODO add your handling code here:
        showListPerson(fileDataPerson);
    }//GEN-LAST:event_ShowPersonButtonActionPerformed

    private void ShowBookButtonActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_ShowBookButtonActionPerformed
        // TODO add your handling code here:
        showListBook(fileDataBook);
    }//GEN-LAST:event_ShowBookButtonActionPerformed
//Takes data from the text fields and when the add book button is pressed it runs the add book method
    private void AddBookBtnActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_AddBookBtnActionPerformed
        // TODO add your handling code here:
        JFrame frame = new JFrame();
        boolean authorNameTrue = false;
        boolean bookNameTrue = false;
        boolean ISBNTrue = false;
        String authorName = AuthorNeTxt.getText();
        String bookName = BookNeTxt.getText();
        String ISBN = BookISBNTxt.getText();
        int bookIDnum = fileDataBook.size() + 1;
        if(authorName.length() > 1 && authorName.length() <= 50 && !"Enter First Name Last Name".equals(authorName)){
            if(authorName.matches("[a-zA-Z\\s]+")){
                authorNameTrue = true;
            }
            else{
            JOptionPane.showMessageDialog(frame, "Can only contain letters");
            }
        }
        else{
            JOptionPane.showMessageDialog(frame, "Charcters need to be between 1 and 50");
        }
        if(bookName.length() > 1 && bookName.length() <= 50 && !"Enter Book Name".equals(bookName)){
            if(bookName.matches("[a-zA-Z\\s]+")){
                bookNameTrue = true;
            }
            else{
            JOptionPane.showMessageDialog(frame, "Can only contain letters");
            }
        }
        else{
            JOptionPane.showMessageDialog(frame, "Charcters need to be between 1 and 50");
        }
        if(ISBN.length() == 13 && !"Enter ISBN".equals(ISBN)){
            if(ISBN.matches("[0-9]+")){
                ISBNTrue = true;
            }
            else{
            JOptionPane.showMessageDialog(frame, "Can only contain digits");
            }
        }
        else{
            JOptionPane.showMessageDialog(frame,"ISBN needs to be 13 digits long");
        }
        
        if(authorNameTrue == true && bookNameTrue == true && ISBNTrue == true){
            try {
                addBook(authorName, bookName, ISBN, bookIDnum);
            } catch (IOException ex) {
                Logger.getLogger(LibraryProGui.class.getName()).log(Level.SEVERE, null, ex);
            } 
        }
        
    }//GEN-LAST:event_AddBookBtnActionPerformed
//Takes data from the text fields and when the add person button is pressed it runs the add person method
    private void AddPersonBtnActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_AddPersonBtnActionPerformed
        // TODO add your handling code here:
        JFrame frame = new JFrame();
        boolean firstNameTrue = false;
        boolean lastNameTrue = false;
        String firstName = PersonFtNeTxt.getText();
        String lastName = PersonLtNeTxt.getText(); 
        int personIDnum = fileDataPerson.size() + 1;
        if(firstName.length() > 1 && firstName.length() <= 50 && !"Enter Name".equals(firstName)){
            if(firstName.matches("[a-zA-Z]+")){
                firstNameTrue = true;
            }
            else{
            JOptionPane.showMessageDialog(frame, "Can only contain letters");
            }
        }
        else{
            JOptionPane.showMessageDialog(frame, "Charcters need to be between 1 and 50");
        }
        if(lastName.length() > 1 && lastName.length() <= 50 && !"Enter Name".equals(lastName)){
            if(lastName.matches("[a-zA-Z]+")){
                lastNameTrue = true;
            }
            else{
            JOptionPane.showMessageDialog(frame, "Can only contain letters");
            }
        }
        else{
            JOptionPane.showMessageDialog(frame, "Charcters need to be between 1 and 50");
        }
        if(firstNameTrue == true && lastNameTrue == true){
            try {
                addPerson(firstName,lastName,personIDnum, fileDataPerson);
            } catch (IOException ex) {
                Logger.getLogger(LibraryProGui.class.getName()).log(Level.SEVERE, null, ex);
            }  
        } 
    }//GEN-LAST:event_AddPersonBtnActionPerformed
//Takes the data entered in the text fields in the lending tab and runs the data true method and if lending method with the data
    private void LendBtnActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_LendBtnActionPerformed
        // TODO add your handling code here:
        JFrame frame = new JFrame();
        boolean lendBookTrue = false;
        boolean lendPersonTrue = false;    
        int lendBookIDNum = 0;
        int lendPersonIDNum = 0;
        if(LendBookIDNumTxt.getText().matches("[0-9]+")){
           lendBookTrue = true; 
        }
        else{
           JOptionPane.showMessageDialog(frame, "Can only contain digits"); 
        }
        if(LendPersonIDNumTxt.getText().matches("[0-9]+")){
           lendPersonTrue = true; 
        }
        else{
           JOptionPane.showMessageDialog(frame, "Can only contain digits"); 
        }
        try{
            lendBookIDNum = Integer.parseInt(LendBookIDNumTxt.getText());
        }catch(NumberFormatException ex){}
        try{
            lendPersonIDNum = Integer.parseInt(LendPersonIDNumTxt.getText());
        }catch(NumberFormatException ex){}
        if(lendBookTrue == true && lendPersonTrue == true){
            dataTrue(lendBookIDNum,lendPersonIDNum);
        }
    }//GEN-LAST:event_LendBtnActionPerformed

    private void ReturnBtnActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_ReturnBtnActionPerformed
        // TODO add your handling code here:
        JFrame frame = new JFrame();
        boolean returnBookTrue = false;
        boolean returnPersonTrue = false; 
        int returnBookIDNum = 0;
        int returnPersonIDNum = 0;
        if(LendBookIDNumTxt.getText().matches("[0-9]+")){
           returnBookTrue = true; 
        }
        else{
           JOptionPane.showMessageDialog(frame, "Can only contain digits"); 
        }
        if(LendPersonIDNumTxt.getText().matches("[0-9]+")){
           returnPersonTrue = true; 
        }
        else{
           JOptionPane.showMessageDialog(frame, "Can only contain digits"); 
        }
        try{
            returnBookIDNum = Integer.parseInt(LendBookIDNumTxt.getText());
        }catch(NumberFormatException ex){}
        try{
            returnPersonIDNum = Integer.parseInt(LendPersonIDNumTxt.getText());
        }catch(NumberFormatException ex){}
        
        if(returnBookTrue == true && returnPersonTrue == true){
            returning(returnBookIDNum,returnPersonIDNum);
        }  
    }//GEN-LAST:event_ReturnBtnActionPerformed
//Takes the array list and person txt file and reads the data and puts it in the array
    public void readFilePerson (String fileNamePerson, ArrayList<Person> fileDataPerson){
        File file = new File(fileNamePerson);
        try{
            Scanner fileScan = new Scanner(file);
            while(fileScan.hasNextLine()){
                String[] eachItem = fileScan.nextLine().split(",");
                try{
                    int idNum = Integer.parseInt(eachItem[2].trim());
                    fileDataPerson.add(new Person(eachItem[0], eachItem[1], idNum));
                }
                catch(NumberFormatException e){
                    textArea.setText(" ignoring this line - couldn't parse ");
                }
            }
        }
        catch(FileNotFoundException e){
            textArea.setText(" File not found ");
            System.exit(1);
        }
    }
//Takes the data from the person text files, reads that data and adds it into an arraylist so that the data can be used
    public void readFileBook (String fileNameBook, ArrayList<Book> fileDataBook){
        File file = new File(fileNameBook);
        try{
            Scanner fileScan = new Scanner(file);
            while(fileScan.hasNextLine()){
                String[] eachItem = fileScan.nextLine().split(",");
                try{
                    int idBookNum = Integer.parseInt(eachItem[3].trim());
                    fileDataBook.add(new Book(eachItem[0], eachItem[1], eachItem[2], idBookNum));
                }
                catch(NumberFormatException e){
                    textArea.setText(" ignoring this line - couldn't parse ");
                }
            }
        }
        catch(FileNotFoundException e){
            textArea.setText(" File not found ");
            System.exit(1);
        }
    }
//prints out the details of the person txt file from the array list
    public void showListPerson(ArrayList<Person> fileDataPerson){
        textArea.setText("LIST of details"+"\n");
       for(Person person:fileDataPerson){
           textArea.append(person.getPersonIDnum()+": "+person.getFirstName()+" "+person.getLastName()+"\n");
        }
    }
 //Takes the data in the book data arraylist and prints out the infomation
    public void showListBook(ArrayList<Book> fileDataBook){
       textArea.setText("LIST of details"+"\n");
       for(Book book:fileDataBook){
           textArea.append("ID:"+book.getBookIDnum()+"\n");
           textArea.append("Book Name:"+book.getBookName()+"\n");
           textArea.append("Author Name:"+book.getAuthorName()+"\n");
           textArea.append("ISBN:"+book.getISBN()+"\n");
           textArea.append("\n");
        }
    }
//When the add book button is pressed it runs this method that takes the data from the book text fields and prints thme into the book text field in the right order
    public void addBook(String authorName, String bookName, String ISBN, int bookIDnum) throws IOException{
        FileWriter fw = null;
        BufferedWriter bw = null;
        PrintWriter pw = null;
        
        try{
            fw = new FileWriter("book.txt", true);
            bw = new BufferedWriter(fw);
            pw = new PrintWriter(bw);
            pw.print("");
            pw.print(bookName+ ",");
            pw.print(authorName+",");
            pw.print(ISBN+",");
            pw.println(bookIDnum );
            textArea.setText("Book Data Successfully appended into file");
            pw.flush();
            fileDataBook.add(new Book(bookName, authorName,ISBN, bookIDnum));
        }
        finally{
            try{
                pw.close();
                bw.close();
                fw.close();
            } catch(IOException io){}
        }
    }
//When the add person button is pressed it runs this method that takes the data from the person text fields and prints them out into the person text file in the correct order
    public void addPerson(String firstName, String lastName, int personIDnum, ArrayList<Person> fileDataPerson) throws IOException{
        FileWriter fw = null;
        BufferedWriter bw = null;
        PrintWriter pw = null;
        
        try{
            fw = new FileWriter("person.txt", true);
            bw = new BufferedWriter(fw);
            pw = new PrintWriter(bw);
            pw.print(firstName + ",");
            pw.print(lastName +",");
            pw.println(personIDnum);
            textArea.setText("Person Data Successfully appended into file");
            pw.flush();
            fileDataPerson.add(new Person(firstName,lastName,personIDnum));
        }
        finally{
            try{
                pw.close();
                bw.close();
                fw.close();
            } catch(IOException io){}
        }
    }
    public void lending(int lendBookIDNum, int lendPersonIDNum){
        boolean bookOut = bookMap.containsKey(lendBookIDNum);
        if (bookOut == true){
            textArea.setText("This book is out"+"\n");
        }
        else{
            bookMap.put(lendBookIDNum,lendPersonIDNum);
            boolean present = personMap.containsKey(lendPersonIDNum);
            if (present == true){
                ArrayList<Integer> values = personMap.get(lendPersonIDNum);
                values.add(lendBookIDNum);
                personMap.put(lendPersonIDNum, values);
                System.out.println("Values" + values);
            }
            else{
                ArrayList<Integer> personBookIDs = new ArrayList<Integer>();
                personBookIDs.add(lendBookIDNum);
                System.out.println(personBookIDs);
                personMap.put(lendPersonIDNum, personBookIDs);
            }  
        }
        textArea.append("Book Map " + bookMap+"\n");
        textArea.append("Person Map " + personMap+"\n");
    }
    public void dataTrue(int lendBookIDNum, int lendPersonIDNum){
        String noPersonId = "";
        for (int indexBk =0; indexBk < fileDataBook.size(); indexBk++){
            if (fileDataBook.get(indexBk).getBookIDnum().equals(lendBookIDNum)){
                textArea.setText("Found book ID number"+"\n");
                for (int indexPn =0; indexPn < fileDataPerson.size(); indexPn++){
                    if (fileDataPerson.get(indexPn).getPersonIDnum().equals(lendPersonIDNum)){
                        textArea.append("Found person ID number"+"\n");
                        lending(lendBookIDNum, lendPersonIDNum);
                        noPersonId = "yes";
                        break;
                    }
                    else{
                        noPersonId = "no";
                    }
                }
                break;
            }
            else{
                textArea.setText("No book ID number allocated"+"\n");
            }
        }
        if (noPersonId == "no"){
            textArea.append("No person ID number allocated"+"\n");
        }
    }
    public void returning(int lendBookIDNum, int lendPersonIDNum){
        boolean bookOut = bookMap.containsKey(lendBookIDNum);
        if (bookOut == true){
            bookMap.remove(lendBookIDNum);
            for (Map.Entry<Integer, ArrayList<Integer>> entry:personMap.entrySet()){
                ArrayList<Integer> personRemoveBook = personMap.get(lendPersonIDNum);
                personRemoveBook.remove(Integer.valueOf(lendBookIDNum));
            }
        }
        
        textArea.setText("Book Map " + bookMap + "\n");
        textArea.append("Person Map " + personMap);
    }

    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JPanel AddBook;
    private javax.swing.JButton AddBookBtn;
    private javax.swing.JPanel AddPerson;
    private javax.swing.JButton AddPersonBtn;
    private javax.swing.JTextField AuthorNeTxt;
    private javax.swing.JTextField BookISBNTxt;
    private javax.swing.JTextField BookNeTxt;
    private javax.swing.JTextField LendBookIDNumTxt;
    private javax.swing.JButton LendBtn;
    private javax.swing.JTextField LendPersonIDNumTxt;
    private javax.swing.JPanel Lending;
    private javax.swing.JTextField PersonFtNeTxt;
    private javax.swing.JTextField PersonLtNeTxt;
    private javax.swing.JButton ReturnBtn;
    private javax.swing.JButton ShowBookButton;
    private javax.swing.JButton ShowPersonButton;
    private javax.swing.JPanel ShowPnAndBk;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel11;
    private javax.swing.JLabel jLabel12;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JLabel jLabel3;
    private javax.swing.JLabel jLabel5;
    private javax.swing.JLabel jLabel6;
    private javax.swing.JLabel jLabel8;
    private javax.swing.JLabel jLabel9;
    private javax.swing.JScrollPane jScrollPane1;
    private javax.swing.JTabbedPane jTabbedPane2;
    private javax.swing.JTextArea textArea;
    // End of variables declaration//GEN-END:variables
}
